var O=Object.defineProperty;var H=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>(H(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function noop$1(){}function assign(t,e){for(const n in e)t[n]=e[n];return t}function is_promise(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function is_empty(t){return Object.keys(t).length===0}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop$1}function append$1(t,e){t.appendChild(e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode&&t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty$1(){return text("")}function listen(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function attr(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function set_svg_attributes(t,e){for(const n in e)attr(t,n,e[n])}function children$1(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.data!==e&&(t.data=e)}function construct_svelte_component(t,e){return new t(e)}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function afterUpdate(t){get_current_component().$$.after_update.push(t)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const t=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}function flush_render_callbacks(t){const e=[],n=[];render_callbacks.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),render_callbacks=e}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,r){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function handle_promise(t,e){const n=e.token={};function r(i,s,o,a){if(e.token!==n)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const l=i&&(e.current=i)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,h)=>{h!==s&&f&&(group_outros(),transition_out(f,1,1,()=>{e.blocks[h]===f&&(e.blocks[h]=null)}),check_outros())}):e.block.d(1),l.c(),transition_in(l,1),l.m(e.mount(),e.anchor),u=!0),e.block=l,e.blocks&&(e.blocks[s]=l),u&&flush()}if(is_promise(t)){const i=get_current_component();if(t.then(s=>{set_current_component(i),r(e.then,1,e.value,s),set_current_component(null)},s=>{if(set_current_component(i),r(e.catch,2,e.error,s),set_current_component(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function update_await_block_branch(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function ensure_array_like(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function get_spread_update(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const c in o)c in a||(r[c]=1);for(const c in a)i[c]||(n[c]=a[c],i[c]=1);t[s]=a}else for(const c in o)i[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function create_component(t){t&&t.c()}function mount_component(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),add_render_callback(()=>{const s=t.$$.on_mount.map(run).filter(is_function);t.$$.on_destroy?t.$$.on_destroy.push(...s):run_all(s),t.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;n.fragment!==null&&(flush_render_callbacks(n.after_update),run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init$1(t,e,n,r,i,s,o=null,a=[-1]){const c=current_component;set_current_component(t);const l=t.$$={fragment:null,ctx:[],props:s,update:noop$1,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:blank_object(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},(f,h,...p)=>{const _=p.length?p[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=_)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](_),u&&make_dirty(t,f)),h}):[],l.update(),u=!0,run_all(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const f=children$1(e.target);l.fragment&&l.fragment.l(f),f.forEach(detach)}else l.fragment&&l.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor),flush()}set_current_component(c)}class SvelteComponent{constructor(){L(this,"$$");L(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(e,n){if(!is_function(n))return noop$1;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);function ascending$1(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function descending(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(t){let e,n,r;t.length!==2?(e=ascending$1,n=(a,c)=>ascending$1(t(a),c),r=(a,c)=>t(a)-c):(e=t===ascending$1||t===descending?t:zero$1,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){const f=i(a,c,l,u-1);return f>l&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:o,right:s}}function zero$1(){return 0}function number$2(t){return t===null?NaN:+t}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$2).center;const bisect=bisectRight;function extent(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=e10?10:s>=e5?5:s>=e2?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?tickSpec(t,e,n*2):[a,c,l]}function ticks(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?tickSpec(e,t,n):tickSpec(t,e,n);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)c[l]=(s-l)/-o;else for(let l=0;l<a;++l)c[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)c[l]=(i+l)/-o;else for(let l=0;l<a;++l)c[l]=(i+l)*o;return c}function tickIncrement(t,e,n){return e=+e,t=+t,n=+n,tickSpec(t,e,n)[2]}function tickStep(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?tickIncrement(e,t,n):tickIncrement(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function identity$3(t){return t}var top=1,right=2,bottom=3,left=4,epsilon$1=1e-6;function translateX(t){return"translate("+t+",0)"}function translateY(t){return"translate(0,"+t+")"}function number$1(t){return e=>+t(e)}function center(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function entering(){return!this.__axis}function axis(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===top||t===left?-1:1,u=t===left||t===right?"x":"y",f=t===top||t===bottom?translateX:translateY;function h(p){var _=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):identity$3),v=Math.max(s,0)+a,N=e.range(),g=+N[0]+c,b=+N[N.length-1]+c,A=(e.bandwidth?center:number$1)(e.copy(),c),$=p.selection?p.selection():p,E=$.selectAll(".domain").data([null]),C=$.selectAll(".tick").data(_,e).order(),R=C.exit(),M=C.enter().append("g").attr("class","tick"),S=C.select("line"),w=C.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(M),S=S.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",l*s)),w=w.merge(M.append("text").attr("fill","currentColor").attr(u,l*v).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),p!==$&&(E=E.transition(p),C=C.transition(p),S=S.transition(p),w=w.transition(p),R=R.transition(p).attr("opacity",epsilon$1).attr("transform",function(T){return isFinite(T=A(T))?f(T+c):this.getAttribute("transform")}),M.attr("opacity",epsilon$1).attr("transform",function(T){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(T))?k:A(T))+c)})),R.remove(),E.attr("d",t===left||t===right?o?"M"+l*o+","+g+"H"+c+"V"+b+"H"+l*o:"M"+c+","+g+"V"+b:o?"M"+g+","+l*o+"V"+c+"H"+b+"V"+l*o:"M"+g+","+c+"H"+b),C.attr("opacity",1).attr("transform",function(T){return f(A(T)+c)}),S.attr(u+"2",l*s),w.attr(u,l*v).text(m),$.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),$.each(function(){this.__axis=A})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(s=o=+p,h):s},h.tickSizeInner=function(p){return arguments.length?(s=+p,h):s},h.tickSizeOuter=function(p){return arguments.length?(o=+p,h):o},h.tickPadding=function(p){return arguments.length?(a=+p,h):a},h.offset=function(p){return arguments.length?(c=+p,h):c},h}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}var noop={value:()=>{}};function dispatch(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dispatch(n)}function Dispatch(t){this._=t}function parseTypenames$1(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,e){var n=this._,r=parseTypenames$1(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=get$1(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=set$1(n[i],t.name,e);else if(e==null)for(i in n)n[i]=set$1(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dispatch(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function get$1(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function set$1(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=noop,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(n,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=t.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Selection$1(r,this._parents)}function array$1(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array$1(t.apply(this,arguments))}}function selection_selectAll(t){typeof t=="function"?t=arrayAll(t):t=selectorAll(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(t.call(c,c.__data__,l,o)),i.push(c));return new Selection$1(r,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&a.push(c);return new Selection$1(r,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$2(t){return function(){return t}}function bindIndex(t,e,n,r,i,s){for(var o=0,a,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new EnterNode(t,s[o]);for(;o<c;++o)(a=e[o])&&(i[o]=a)}function bindKey(t,e,n,r,i,s,o){var a,c,l=new Map,u=e.length,f=s.length,h=new Array(u),p;for(a=0;a<u;++a)(c=e[a])&&(h[a]=p=o.call(c,c.__data__,a,e)+"",l.has(p)?i[a]=c:l.set(p,c));for(a=0;a<f;++a)p=o.call(t,s[a],a,s)+"",(c=l.get(p))?(r[a]=c,c.__data__=s[a],l.delete(p)):n[a]=new EnterNode(t,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(h[a])===c&&(i[a]=c)}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var n=e?bindKey:bindIndex,r=this._parents,i=this._groups;typeof t!="function"&&(t=constant$2(t));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],f=i[l],h=f.length,p=arraylike(t.call(u,u&&u.__data__,l,r)),_=p.length,m=a[l]=new Array(_),v=o[l]=new Array(_),N=c[l]=new Array(h);n(u,f,m,v,N,p,e);for(var g=0,b=0,A,$;g<_;++g)if(A=m[g]){for(g>=b&&(b=g+1);!($=v[b])&&++b<_;);A._next=$||null}}return o=new Selection$1(o,r),o._enter=a,o._exit=c,o}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function selection_merge(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),p,_=0;_<f;++_)(p=l[_]||u[_])&&(h[_]=p);for(;c<i;++c)a[c]=n[c];return new Selection$1(a,this._parents)}function selection_order(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function selection_sort(t){t||(t=ascending);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new Selection$1(i,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function selection_size(){let t=0;for(const e of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function attrFunctionNS$1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function selection_attr(t,e){var n=namespace(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?n.local?attrFunctionNS$1:attrFunction$1:n.local?attrConstantNS$1:attrConstant$1)(n,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function styleFunction$1(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function selection_style(t,e,n){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(t,e,n??"")):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){for(var n=classList(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function classedRemove(t,e){for(var n=classList(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var n=classArray(t+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(n,e))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,e){var n=typeof t=="function"?t:creator(t),r=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function onRemove(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function onAdd(t,e,n){return function(){var r=this.__on,i,s=contextListener(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function selection_on(t,e,n){var r=parseTypenames(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?onAdd:onRemove,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function dispatchEvent(t,e,n){var r=defaultView(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var root=[null];function Selection$1(t,e){this._groups=t,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(t){return typeof t=="string"?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}function define(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function extend(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rgbn(e):n===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,n,r){return r<=0&&(t=e=n=NaN),new Rgb(t,e,n,r)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb(t,e,n,r){return arguments.length===1?rgbConvert(t):new Rgb(t,e,n,r??1)}function Rgb(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}define(Rgb,rgb,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,n,r)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Hsl(o,a,c,t.opacity)}function hsl(t,e,n,r){return arguments.length===1?hslConvert(t):new Hsl(t,e,n,r??1)}function Hsl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Rgb(hsl2rgb(t>=240?t-240:t+120,i,r),hsl2rgb(t,i,r),hsl2rgb(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const constant$1=t=>()=>t;function linear$1(t,e){return function(n){return t+n*e}}function exponential(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gamma(t){return(t=+t)==1?nogamma:function(e,n){return n-e?exponential(e,n,t):constant$1(isNaN(e)?n:e)}}function nogamma(t,e){var n=e-t;return n?linear$1(t,n):constant$1(isNaN(t)?e:t)}const interpolateRgb=function t(e){var n=gamma(e);function r(i,s){var o=n((i=rgb(i)).r,(s=rgb(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=nogamma(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function numberArray(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=interpolate$1(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function date(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function interpolateNumber(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function object(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=interpolate$1(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function interpolateString(t,e){var n=reA.lastIndex=reB.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(t=t+"",e=e+"";(r=reA.exec(t))&&(i=reB.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:interpolateNumber(r,i)})),n=reB.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?one(c[0].x):zero(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function interpolate$1(t,e){var n=typeof e,r;return e==null||n==="boolean"?constant$1(e):(n==="number"?interpolateNumber:n==="string"?(r=color(e))?(e=r,interpolateRgb):interpolateString:e instanceof color?interpolateRgb:e instanceof Date?date:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,e,n,r,i,s){var o,a,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*degrees,skewX:Math.atan(c)*degrees,scaleX:o,scaleY:a}}var svgNode;function parseCss(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?identity$2:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(t){return t==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),!(t=svgNode.transform.baseVal.consolidate()))?identity$2:(t=t.matrix,decompose(t.a,t.b,t.c,t.d,t.e,t.f))}function interpolateTransform(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,f,h,p,_){if(l!==f||u!==h){var m=p.push("translate(",null,e,null,n);_.push({i:m-4,x:interpolateNumber(l,f)},{i:m-2,x:interpolateNumber(u,h)})}else(f||h)&&p.push("translate("+f+e+h+n)}function o(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:interpolateNumber(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:interpolateNumber(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,p,_){if(l!==f||u!==h){var m=p.push(i(p)+"scale(",null,",",null,")");_.push({i:m-4,x:interpolateNumber(l,f)},{i:m-2,x:interpolateNumber(u,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,h),o(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(p){for(var _=-1,m=h.length,v;++_<m;)f[(v=h[_]).i]=v.x(p);return f.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(t,e,n){var r=new Timer;return r.restart(t,e,n),r}function timerFlush(){now(),++frame;for(var t=taskHead,e;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),e=t-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=t)}function nap(){for(var t,e=taskHead,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:taskHead=n);taskTail=t,sleep(r)}function sleep(t){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=t-clockNow;e>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(t,e,n){var r=new Timer;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;create(t,n,{name:e,index:r,group:i,on:emptyOn,tween:emptyTween,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:CREATED})}function init(t,e){var n=get(t,e);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set(t,e){var n=get(t,e);if(n.state>STARTED)throw new Error("too late; already running");return n}function get(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function create(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=timer(s,0,n.time);function s(l){n.state=SCHEDULED,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,f,h,p;if(n.state!==SCHEDULED)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===STARTED)return timeout(o);p.state===RUNNING?(p.state=ENDED,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=ENDED,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(timeout(function(){n.state===STARTED&&(n.state=RUNNING,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=STARTING,n.on.call("start",t,t.__data__,n.index,n.group),n.state===STARTING){for(n.state=STARTED,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=ENDING,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===ENDING&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=ENDED,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function interrupt(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>STARTING&&r.state<ENDING,r.state=ENDED,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function selection_interrupt(t){return this.each(function(){interrupt(this,t)})}function tweenRemove(t,e){var n,r;return function(){var i=set(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function tweenFunction(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=set(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function transition_tween(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=get(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(n,t,e))}function tweenValue(t,e,n){var r=t._id;return t.each(function(){var i=set(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return get(i,r).value[e]}}function interpolate(t,e){var n;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(n=color(e))?(e=n,interpolateRgb):interpolateString)(t,e)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function attrConstantNS(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function attrFunction(t,e,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function attrFunctionNS(t,e,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function transition_attr(t,e){var n=namespace(t),r=n==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(t,typeof e=="function"?(n.local?attrFunctionNS:attrFunction)(n,r,tweenValue(this,"attr."+t,e)):e==null?(n.local?attrRemoveNS:attrRemove)(n):(n.local?attrConstantNS:attrConstant)(n,r,e))}function attrInterpolate(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function attrInterpolateNS(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function attrTweenNS(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&attrInterpolateNS(t,s)),n}return i._value=e,i}function attrTween(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&attrInterpolate(t,s)),n}return i._value=e,i}function transition_attrTween(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=namespace(t);return this.tween(n,(r.local?attrTweenNS:attrTween)(r,e))}function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}}function transition_delay(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?delayFunction:delayConstant)(e,t)):get(this.node(),e).delay}function durationFunction(t,e){return function(){set(this,t).duration=+e.apply(this,arguments)}}function durationConstant(t,e){return e=+e,function(){set(this,t).duration=e}}function transition_duration(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?durationFunction:durationConstant)(e,t)):get(this.node(),e).duration}function easeConstant(t,e){if(typeof e!="function")throw new Error;return function(){set(this,t).ease=e}}function transition_ease(t){var e=this._id;return arguments.length?this.each(easeConstant(e,t)):get(this.node(),e).ease}function easeVarying(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;set(this,t).ease=n}}function transition_easeVarying(t){if(typeof t!="function")throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&t.call(c,c.__data__,l,s)&&a.push(c);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=e[a],l=n[a],u=c.length,f=o[a]=new Array(u),h,p=0;p<u;++p)(h=c[p]||l[p])&&(f[p]=h);for(;a<r;++a)o[a]=e[a];return new Transition(o,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function onFunction(t,e,n){var r,i,s=start(e)?init:set;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function transition_on(t,e){var n=this._id;return arguments.length<2?get(this.node(),n).on.on(t):this.each(onFunction(n,t,e))}function removeFunction(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selector(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,schedule(l[h],e,n,h,l,get(u,n)));return new Transition(s,this._parents,e,n)}function transition_selectAll(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selectorAll(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),p,_=get(u,n),m=0,v=h.length;m<v;++m)(p=h[m])&&schedule(p,e,n,m,h,_);s.push(h),o.push(u)}return new Transition(s,o,e,n)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,e){var n,r,i;return function(){var s=styleValue(this,t),o=(this.style.removeProperty(t),styleValue(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,n){var r,i=n+"",s;return function(){var o=styleValue(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function styleFunction(t,e,n){var r,i,s;return function(){var o=styleValue(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),styleValue(this,t))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a))}}function styleMaybeRemove(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var c=set(this,t),l=c.on,u=c.value[s]==null?a||(a=styleRemove(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function transition_style(t,e,n){var r=(t+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(t,styleNull(t,r)).on("end.style."+t,styleRemove(t)):typeof e=="function"?this.styleTween(t,styleFunction(t,r,tweenValue(this,"style."+t,e))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,r,e),n).on("end.style."+t,null)}function styleInterpolate(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function styleTween(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&styleInterpolate(t,o,n)),r}return s._value=e,s}function transition_styleTween(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,styleTween(t,e,n??""))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t(this);this.textContent=e??""}}function transition_text(t){return this.tween("text",typeof t=="function"?textFunction(tweenValue(this,"text",t)):textConstant(t==null?"":t+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&textInterpolate(i)),e}return r._value=t,r}function transition_textTween(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,textTween(t))}function transition_transition(){for(var t=this._name,e=this._id,n=newId(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=get(c,e);schedule(c,t,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Transition(r,this._parents,t,n)}function transition_end(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=set(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&s()})}var id=0;function Transition(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function selection_transition(t){var e,n;t instanceof Transition?(e=t._id,t=t._name):(e=newId(),(n=defaultTiming).time=now(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&schedule(c,t,e,l,o,n||inherit(c,e));return new Transition(r,this._parents,t,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function appendRound(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return append;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Path{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?append:appendRound(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,c=r-e,l=i-n,u=o-e,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>epsilon)if(!(Math.abs(f*c-l*u)>epsilon)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,_=i-a,m=c*c+l*l,v=p*p+_*_,N=Math.sqrt(m),g=Math.sqrt(h),b=s*Math.tan((pi-Math.acos((m+h-v)/(2*N*g)))/2),A=b/g,$=b/N;Math.abs(A-1)>epsilon&&this._append`L${e+A*u},${n+A*f}`,this._append`A${s},${s},0,0,${+(f*p>u*_)},${this._x1=e+$*c},${this._y1=n+$*l}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=e+a,u=n+c,f=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>epsilon||Math.abs(this._y1-u)>epsilon)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%tau+tau),h>tauEpsilon?this._append`A${r},${r},0,1,${f},${e-a},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:h>epsilon&&this._append`A${r},${r},0,${+(h>=pi)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var prefixExponent;function formatPrefixAuto(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+formatDecimalParts(t,Math.max(0,e+s-1))[0]}function formatRounded(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const formatTypes={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded(t*100,e),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$1(t){return t}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(t){var e=t.grouping===void 0||t.thousands===void 0?identity$1:formatGroup(map.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?identity$1:formatNumerals(map.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=formatSpecifier(f);var h=f.fill,p=f.align,_=f.sign,m=f.symbol,v=f.zero,N=f.width,g=f.comma,b=f.precision,A=f.trim,$=f.type;$==="n"?(g=!0,$="g"):formatTypes[$]||(b===void 0&&(b=12),A=!0,$="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",C=m==="$"?r:/[%p]/.test($)?o:"",R=formatTypes[$],M=/[defgprs%]/.test($);b=b===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function S(w){var T=E,k=C,F,P,D;if($==="c")k=R(w)+k,w="";else{w=+w;var B=w<0||1/w<0;if(w=isNaN(w)?c:R(Math.abs(w),b),A&&(w=formatTrim(w)),B&&+w==0&&_!=="+"&&(B=!1),T=(B?_==="("?_:a:_==="-"||_==="("?"":_)+T,k=($==="s"?prefixes[8+prefixExponent/3]:"")+k+(B&&_==="("?")":""),M){for(F=-1,P=w.length;++F<P;)if(D=w.charCodeAt(F),48>D||D>57){k=(D===46?i+w.slice(F+1):w.slice(F))+k,w=w.slice(0,F);break}}}g&&!v&&(w=e(w,1/0));var U=T.length+w.length+k.length,I=U<N?new Array(N-U+1).join(h):"";switch(g&&v&&(w=e(I+w,I.length?N-k.length:1/0),I=""),p){case"<":w=T+w+k+I;break;case"=":w=T+I+w+k;break;case"^":w=I.slice(0,U=I.length>>1)+T+w+k+I.slice(U);break;default:w=I+T+w+k;break}return s(w)}return S.toString=function(){return f+""},S}function u(f,h){var p=l((f=formatSpecifier(f),f.type="f",f)),_=Math.max(-8,Math.min(8,Math.floor(exponent(h)/3)))*3,m=Math.pow(10,-_),v=prefixes[8+_/3];return function(N){return p(m*N)+v}}return{format:l,formatPrefix:u}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(t){return locale=formatLocale(t),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function constants(t){return function(){return t}}function number(t){return+t}var unit=[0,1];function identity(t){return t}function normalize(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:constants(isNaN(e)?NaN:.5)}function clamper(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function bimap(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=normalize(i,r),s=n(o,s)):(r=normalize(r,i),s=n(s,o)),function(a){return s(r(a))}}function polymap(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=normalize(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var c=bisect(t,a,1,r)-1;return s[c](i[c](a))}}function copy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var t=unit,e=unit,n=interpolate$1,r,i,s,o=identity,a,c,l;function u(){var h=Math.min(t.length,e.length);return o!==identity&&(o=clamper(t[0],t[h-1])),a=h>2?polymap:bimap,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=a(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=a(e,t.map(r),interpolateNumber)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,number),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=interpolateRound,u()},f.clamp=function(h){return arguments.length?(o=h?!0:identity,u()):o!==identity},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,u()}}function continuous(){return transformer()(identity,identity)}function tickFormat(t,e,n,r){var i=tickStep(t,e,n),s;switch(r=formatSpecifier(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=precisionPrefix(i,o))&&(r.precision=s),formatPrefix(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=precisionRound(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=precisionFixed(i))&&(r.precision=s-(r.type==="%")*2);break}}return format(r)}function linearish(t){var e=t.domain;return t.ticks=function(n){var r=e();return ticks(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return tickFormat(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=tickIncrement(o,a,n),l===c)return r[i]=o,r[s]=a,e(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy(t,linear())},initRange.apply(t,arguments),linearish(t)}function constant(t){return function(){return t}}function withPath(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Path(e)}function array(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Linear(t){this._context=t}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function curveLinear(t){return new Linear(t)}function x(t){return t[0]}function y(t){return t[1]}function line(t,e){var n=constant(!0),r=null,i=curveLinear,s=null,o=withPath(a);t=typeof t=="function"?t:t===void 0?x:constant(t),e=typeof e=="function"?e:e===void 0?y:constant(e);function a(c){var l,u=(c=array(c)).length,f,h=!1,p;for(r==null&&(s=i(p=o())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,l,c),+e(f,l,c));if(p)return s=null,p+""||null}return a.x=function(c){return arguments.length?(t=typeof c=="function"?c:constant(+c),a):t},a.y=function(c){return arguments.length?(e=typeof c=="function"?c:constant(+c),a):e},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:constant(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),a):r},a}function Transform(t,e,n){this.k=t,this.x=e,this.y=n}Transform.prototype={constructor:Transform,scale:function(t){return t===1?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;(function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(r="utf-8"){if(r!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${r}') is invalid.`)}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(r,i={stream:!1}){if(i.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let s=0;const o=r.length;let a=0,c=Math.max(32,o+(o>>1)+7),l=new Uint8Array(c>>3<<3);for(;s<o;){let u=r.charCodeAt(s++);if(u>=55296&&u<=56319){if(s<o){const f=r.charCodeAt(s);(f&64512)===56320&&(++s,u=((u&1023)<<10)+(f&1023)+65536)}if(u>=55296&&u<=56319)continue}if(a+4>l.length){c+=8,c*=1+s/r.length*2,c=c>>3<<3;const f=new Uint8Array(c);f.set(l),l=f}if(u&4294967168)if(!(u&4294965248))l[a++]=u>>6&31|192;else if(!(u&4294901760))l[a++]=u>>12&15|224,l[a++]=u>>6&63|128;else if(!(u&4292870144))l[a++]=u>>18&7|240,l[a++]=u>>12&63|128,l[a++]=u>>6&63|128;else continue;else{l[a++]=u;continue}l[a++]=u&63|128}return l.slice(0,a)};function n(r="utf-8",i={fatal:!1}){if(r!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${r}') is invalid.`);if(i.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1}),n.prototype.decode=function(r,i={stream:!1}){if(i.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const s=new Uint8Array(r);let o=0;const a=s.length,c=[];for(;o<a;){const l=s[o++];if(l===0)break;if(!(l&128))c.push(l);else if((l&224)===192){const u=s[o++]&63;c.push((l&31)<<6|u)}else if((l&240)===224){const u=s[o++]&63,f=s[o++]&63;c.push((l&31)<<12|u<<6|f)}else if((l&248)===240){const u=s[o++]&63,f=s[o++]&63,h=s[o++]&63;let p=(l&7)<<18|u<<12|f<<6|h;p>65535&&(p-=65536,c.push(p>>>10&1023|55296),p=56320|p&1023),c.push(p)}}return String.fromCharCode.apply(null,c)},t.TextEncoder=e,t.TextDecoder=n})(typeof window<"u"?window:typeof self<"u"?self:void 0);function decode(t,e="utf8"){return new TextDecoder(e).decode(t)}const encoder=new TextEncoder;function encode(t){return encoder.encode(t)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(e=defaultByteLength,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof IOBuffer)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=typedArrays[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===hostBigEndian&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const c=new typedArrays[n](a.buffer);return this.offset+=r,c.reverse(),c}const o=new typedArrays[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return decode(this.readBytes(e))}decodeText(e=1,n="utf-8"){return decode(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(encode(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const types={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function num2str(t){switch(Number(t)){case types.BYTE:return"byte";case types.CHAR:return"char";case types.SHORT:return"short";case types.INT:return"int";case types.FLOAT:return"float";case types.DOUBLE:return"double";default:return"undefined"}}function num2bytes(t){switch(Number(t)){case types.BYTE:return 1;case types.CHAR:return 1;case types.SHORT:return 2;case types.INT:return 4;case types.FLOAT:return 4;case types.DOUBLE:return 8;default:return-1}}function str2num(t){switch(String(t)){case"byte":return types.BYTE;case"char":return types.CHAR;case"short":return types.SHORT;case"int":return types.INT;case"float":return types.FLOAT;case"double":return types.DOUBLE;default:return-1}}function readNumber(t,e){if(t!==1){const n=new Array(t);for(let r=0;r<t;r++)n[r]=e();return n}else return e()}function readType(t,e,n){switch(e){case types.BYTE:return Array.from(t.readBytes(n));case types.CHAR:return trimNull(t.readChars(n));case types.SHORT:return readNumber(n,t.readInt16.bind(t));case types.INT:return readNumber(n,t.readInt32.bind(t));case types.FLOAT:return readNumber(n,t.readFloat32.bind(t));case types.DOUBLE:return readNumber(n,t.readFloat64.bind(t));default:throw new Error(`non valid type ${e}`)}}function trimNull(t){return t.charCodeAt(t.length-1)===0?t.substring(0,t.length-1):t}function nonRecord(t,e){const n=str2num(e.type),r=e.size/num2bytes(n),i=new Array(r);for(let s=0;s<r;s++)i[s]=readType(t,n,1);return i}function record(t,e,n){const r=str2num(e.type),i=e.size?e.size/num2bytes(r):1,s=n.length,o=new Array(s),a=n.recordStep;if(a)for(let c=0;c<s;c++){const l=t.offset;o[c]=readType(t,r,i),t.seek(l+a)}else throw new Error("recordDimension.recordStep is undefined");return o}function notNetcdf(t,e){if(t)throw new TypeError(`Not a valid NetCDF v3.x file: ${e}`)}function padding(t){t.offset%4!==0&&t.skip(4-t.offset%4)}function readName(t){const e=t.readUint32(),n=t.readChars(e);return padding(t),n}const ZERO=0,NC_DIMENSION=10,NC_VARIABLE=11,NC_ATTRIBUTE=12,NC_UNLIMITED=0;function header(t,e){const n={version:e},r={length:t.readUint32()},i=dimensionsList(t);Array.isArray(i)||(r.id=i.recordId,r.name=i.recordName,n.dimensions=i.dimensions),n.globalAttributes=attributesList(t);const s=variablesList(t,r==null?void 0:r.id,e);return Array.isArray(s)||(n.variables=s.variables,r.recordStep=s.recordStep),n.recordDimension=r,n}function dimensionsList(t){const e={};let n,r;const i=t.readUint32();let s;if(i===ZERO)return notNetcdf(t.readUint32()!==ZERO,"wrong empty tag for list of dimensions"),[];{notNetcdf(i!==NC_DIMENSION,"wrong tag for list of dimensions");const o=t.readUint32();s=new Array(o);for(let a=0;a<o;a++){const c=readName(t),l=t.readUint32();l===NC_UNLIMITED&&(n=a,r=c),s[a]={name:c,size:l}}}return n!==void 0&&(e.recordId=n),r!==void 0&&(e.recordName=r),e.dimensions=s,e}function attributesList(t){const e=t.readUint32();let n;if(e===ZERO)return notNetcdf(t.readUint32()!==ZERO,"wrong empty tag for list of attributes"),[];{notNetcdf(e!==NC_ATTRIBUTE,"wrong tag for list of attributes");const r=t.readUint32();n=new Array(r);for(let i=0;i<r;i++){const s=readName(t),o=t.readUint32();notNetcdf(o<1||o>6,`non valid type ${o}`);const a=t.readUint32(),c=readType(t,o,a);padding(t),n[i]={name:s,type:num2str(o),value:c}}}return n}function variablesList(t,e,n){const r=t.readUint32();let i=0,s;if(r===ZERO)return notNetcdf(t.readUint32()!==ZERO,"wrong empty tag for list of variables"),[];{notNetcdf(r!==NC_VARIABLE,"wrong tag for list of variables");const o=t.readUint32();s=new Array(o);for(let a=0;a<o;a++){const c=readName(t),l=t.readUint32(),u=new Array(l);for(let v=0;v<l;v++)u[v]=t.readUint32();const f=attributesList(t),h=t.readUint32();notNetcdf(h<1&&h>6,`non valid type ${h}`);const p=t.readUint32();let _=t.readUint32();n===2&&(notNetcdf(_>0,"offsets larger than 4GB not supported"),_=t.readUint32());let m=!1;typeof e<"u"&&u[0]===e&&(i+=p,m=!0),s[a]={name:c,dimensions:u,attributes:f,type:num2str(h),size:p,offset:_,record:m}}}return{variables:s,recordStep:i}}function toString(){const t=[];t.push("DIMENSIONS");for(const n of this.dimensions)t.push(`  ${n.name.padEnd(30)} = size: ${n.size}`);t.push(""),t.push("GLOBAL ATTRIBUTES");for(const n of this.globalAttributes)t.push(`  ${n.name.padEnd(30)} = ${n.value}`);const e=JSON.parse(JSON.stringify(this.variables));t.push(""),t.push("VARIABLES:");for(const n of e){n.value=this.getDataVariable(n);let r=JSON.stringify(n.value);r.length>50&&(r=r.substring(0,50)),isNaN(n.value.length)||(r+=` (length: ${n.value.length})`),t.push(`  ${n.name.padEnd(30)} = ${r}`)}return t.join(`
`)}class NetCDFReader{constructor(e){this.toString=toString;const n=new IOBuffer(e);n.setBigEndian(),notNetcdf(n.readChars(3)!=="CDF","should start with CDF");const r=n.readByte();notNetcdf(r>2,"unknown version"),this.header=header(n,r),this.buffer=n}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(e){const n=this.globalAttributes.find(r=>r.name===e);return n?n.value:null}getDataVariableAsString(e){const n=this.getDataVariable(e);return n?n.join(""):null}get variables(){return this.header.variables}getDataVariable(e){let n;if(typeof e=="string"?n=this.header.variables.find(r=>r.name===e):n=e,n===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(n.offset),n.record?record(this.buffer,n,this.header.recordDimension):nonRecord(this.buffer,n)}dataVariableExists(e){return this.header.variables.find(r=>r.name===e)!==void 0}attributeExists(e){return this.globalAttributes.find(r=>r.name===e)!==void 0}}class DatasetRows{constructor(e){L(this,"rows");L(this,"_domainCache",{});this.rows=e}domain(e){if(!(e in this._domainCache)){const n=this.rows.map(r=>r[e]);this._domainCache[e]=extent(n)}return this._domainCache[e]}}class NetCDFTableWrapper{constructor(t){L(this,"reader",null);L(this,"data");L(this,"_selectionCache",{});this.reader=t,this.data=this.parseFile()}parseFile(){const{buffer:t}=this.reader,{variables:e,dimensions:n}=this.reader.header;let r=0,i=-1;e.forEach((u,f)=>{u.size/8>r&&(r=u.size/8,i=f)});const o=e[i].dimensions.map(u=>n[u]).map(u=>u.size),a=e[i].dimensions.map(u=>e.find(f=>f.name==n[u].name)),c=(u,f)=>{const h=[];let p=u;for(let _=f.length-1;_>=0;_--){const m=f[_],v=p%m;h[_]=v,p=Math.floor(p/m)}return h};return a.push(e[i]),Array.apply(null,new Array(r)).map((u,f)=>{const h=[...c(f,o),f],p=Object.create(null);return h.forEach((_,m)=>{const{offset:v,type:N,name:g}=a[m],b=a[m].attributes;if(g==="time"){const A=b.find(C=>C.name==="units").value.toString().split("days since ")[1],$=new Date(A).getTime(),E=864e5;Object.defineProperties(p,{[g]:{get:()=>$+E*t.seek(v+_*4).readInt32(),configurable:!1}})}else N==="char"?Object.defineProperties(p,{[g]:{get:()=>t.seek(v+_*9).readChars(9).replaceAll("\0",""),configurable:!1}}):N==="double"?Object.defineProperties(p,{[g]:{get:()=>t.seek(v+_*8).readFloat64(),configurable:!1}}):N==="int"&&Object.defineProperties(p,{[g]:{get:()=>t.seek(v+_*4).readInt32(),configurable:!1}})}),p})}select(selector){if(selector==="*"&&(this._selectionCache["*"]=new DatasetRows(this.data)),!(selector in this._selectionCache)){const filters=selector.split(/\s*((?:\&\&|\|\|))\s*/).map(t=>{if(t=="||"||t=="&&")return t;if(t.includes(">=")){const[e,n]=t.split(">=");return r=>r[e]>=n}else if(t.includes("<=")){const[e,n]=t.split("<=");return r=>r[e]<=n}else if(t.includes(">")){const[e,n]=t.split(">");return r=>r[e]>=n}else if(t.includes("<")){const[e,n]=t.split("<");return r=>r[e]<=n}else if(t.includes("===")){const[e,n]=t.split("===");return r=>r[e]===n}throw new Error(`Invalid selector term: ${t}, expected one of [">=", "<=", ">", "<", "==="]`)}),filterFn=d=>eval(filters.map(t=>typeof t=="string"?t:t(d)).join("")),filtered=this.data.filter(filterFn);this._selectionCache[selector]=new DatasetRows(filtered)}return this._selectionCache[selector]}domain(t){const e=this.data.map(n=>n[t]);return extent(e)}domainForSelections(t,e){const n=e.map(s=>this.select(s).domain(t)),r=n.map(s=>s[0]),i=n.map(s=>s[1]);return[Math.min(...r),Math.max(...i)]}}const loadNetCDFTable=async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch dataset @ ${t}, status=${e.status} -- ${e.statusText}`);const n=await e.arrayBuffer(),r=new NetCDFReader(n);return new NetCDFTableWrapper(r)},datasetsCache={},getDataset=async t=>{if(!(t in datasetsCache)){const e=await loadNetCDFTable(t);datasetsCache[t]=e}return datasetsCache[t]},getLoadedDataset=t=>{if(!(t in datasetsCache))throw new Error(`Dataset @ ${t} is not loaded`);return datasetsCache[t]},ensureDatasetIsLoaded=getDataset,_dataForSelectionCache={},ensureDataSelectionIsLoaded=async(t,e)=>{const{ensembles:n,realizations:r,netcdfFile:i}=e,a=(await(await fetch(`${t}/index.json`)).json()).ensembles;for(let c of n){let l;c==="first"?l=a[0]:c==="last"?l=a[a.length-1]:l=c;const u=`${t}/${l}`,f=`${u}/index.json`,p=await(await fetch(f)).json(),{ensemble_size:_}=p;if(l in _dataForSelectionCache||(_dataForSelectionCache[l]=new Array(_),c!==l&&(_dataForSelectionCache[c]=_dataForSelectionCache[l])),r==="*")for(let m=0;m<_;++m){const v=`${u}/realization-${m}/${i}`;await ensureDatasetIsLoaded(v),_dataForSelectionCache[l][m]={ensembleKey:l,ensembleAlias:c,realizationIndex:m,datasetURL:v,table:getLoadedDataset(v)},console.info(`${v} loaded successfully`)}}};class DataForSelection{constructor(e){L(this,"data",[]);L(this,"_domainsCache",{});this.data=e}domain(e,n){const r=`col:${e};;sel${n}`;if(r in this._domainsCache)return this._domainsCache[r];if(n)return this._domainsCache[r]=this._domainForSelector(e,n);{const i=this.data.map(({table:s})=>s.domain(e));return this._domainsCache[r]=[Math.min(...i.map(s=>s[0])),Math.max(...i.map(s=>s[1]))]}}_domainForSelector(e,n){const r=this.data.map(({table:i})=>i.select(n).domain(e));return[Math.min(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}map(e){return this.data.map(e)}}const getLoadedDataForSelection=(t,e)=>{const n=[];return e.ensembles.forEach(r=>{_dataForSelectionCache[r].forEach(i=>n.push({...i}))}),new DataForSelection(n)};function create_catch_block$1(t){let e,n,r=t[6].toString()+"",i;return{c(){e=svg_element("text"),n=text("Failed to load dataset "),i=text(r)},m(s,o){insert(s,e,o),append$1(e,n),append$1(e,i)},p(s,o){o&1&&r!==(r=s[6].toString()+"")&&set_data(i,r)},d(s){s&&detach(e)}}}function create_then_block$1(t){let e,n,r=[{class:"fill-none"},t[0].style,{d:n=t[1]()}],i={};for(let s=0;s<r.length;s+=1)i=assign(i,r[s]);return{c(){e=svg_element("path"),set_svg_attributes(e,i)},m(s,o){insert(s,e,o)},p(s,o){set_svg_attributes(e,i=get_spread_update(r,[{class:"fill-none"},o&1&&s[0].style,o&2&&n!==(n=s[1]())&&{d:n}]))},d(s){s&&detach(e)}}}function create_pending_block$1(t){return{c:noop$1,m:noop$1,p:noop$1,d:noop$1}}function create_fragment$4(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,error:6};return handle_promise(n=ensureDatasetIsLoaded(t[0].datasetURL),r),{c(){e=svg_element("g"),r.block.c()},m(i,s){insert(i,e,s),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null},p(i,[s]){t=i,r.ctx=t,s&1&&n!==(n=ensureDatasetIsLoaded(t[0].datasetURL))&&handle_promise(n,r)||update_await_block_branch(r,t,s)},i:noop$1,o:noop$1,d(i){i&&detach(e),r.block.d(),r.token=null,r=null}}}function instance$3(t,e,n){let r,{spec:i}=e,{width:s}=e,{height:o}=e,{domainY:a}=e,{domainX:c}=e;return t.$$set=l=>{"spec"in l&&n(0,i=l.spec),"width"in l&&n(2,s=l.width),"height"in l&&n(3,o=l.height),"domainY"in l&&n(4,a=l.domainY),"domainX"in l&&n(5,c=l.domainX)},t.$$.update=()=>{t.$$.dirty&61&&n(1,r=()=>{const u=getLoadedDataset(i.datasetURL).select(i.selector),f=linear().domain(c).range([0,s]),h=linear().domain(a).range([o,0]),_=line().x(m=>f(m[i.axisX])).y(m=>h(m[i.axisY]))(u.rows);if(!_)throw new Error("Failed to create line from data");return _})},[i,r,s,o,a,c]}class LineLayer extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$3,create_fragment$4,safe_not_equal,{spec:0,width:2,height:3,domainY:4,domainX:5})}}function create_fragment$3(t){let e,n,r,i;return{c(){e=svg_element("g"),n=svg_element("g"),i=svg_element("g"),attr(n,"transform",r=`translate(0,${t[0]})`)},m(s,o){insert(s,e,o),append$1(e,n),t[8](n),append$1(e,i),t[9](i)},p(s,[o]){o&1&&r!==(r=`translate(0,${s[0]})`)&&attr(n,"transform",r)},i:noop$1,o:noop$1,d(s){s&&detach(e),t[8](null),t[9](null)}}}function instance$2(t,e,n){let{width:r}=e,{height:i}=e,{domainY:s}=e,{domainX:o}=e,{axisYKey:a}=e,{axisXKey:c}=e,l,u;const f=()=>{if(!l)return;const m=linear().domain(o).range([0,r]),v=axisBottom(m);v.ticks(8,".3s"),select(l).call(v)},h=()=>{if(!u)return;const m=linear().domain(s).range([i,0]),v=axisLeft(m);select(u).call(v)};afterUpdate(()=>{f(),h()});function p(m){binding_callbacks[m?"unshift":"push"](()=>{l=m,n(1,l)})}function _(m){binding_callbacks[m?"unshift":"push"](()=>{u=m,n(2,u)})}return t.$$set=m=>{"width"in m&&n(3,r=m.width),"height"in m&&n(0,i=m.height),"domainY"in m&&n(4,s=m.domainY),"domainX"in m&&n(5,o=m.domainX),"axisYKey"in m&&n(6,a=m.axisYKey),"axisXKey"in m&&n(7,c=m.axisXKey)},[i,l,u,r,s,o,a,c,p,_]}class SingleAxisLayer extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$2,create_fragment$3,safe_not_equal,{width:3,height:0,domainY:4,domainX:5,axisYKey:6,axisXKey:7})}}const watchResize=t=>{const e=new ResizeObserver(n=>{t.dispatchEvent(new CustomEvent("resized",{detail:{entries:n}}))});return e.observe(t),{destroy(){e.disconnect()}}};function get_each_context(t,e,n){const r=t.slice();return r[16]=e[n],r}function create_catch_block(t){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block(t){let e,n,r,i,s=t[6]>0&&t[7]>0&&create_if_block(t);return{c(){e=element("div"),s&&s.c(),attr(e,"class","relative w-full h-full shadow-lg rounded m-5")},m(o,a){insert(o,e,a),s&&s.m(e,null),n=!0,r||(i=[action_destroyer(watchResize.call(null,e)),listen(e,"resized",t[13])],r=!0)},p(o,a){o[6]>0&&o[7]>0?s?(s.p(o,a),a&192&&transition_in(s,1)):(s=create_if_block(o),s.c(),transition_in(s,1),s.m(e,null)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(o){n||(transition_in(s),n=!0)},o(o){transition_out(s),n=!1},d(o){o&&detach(e),s&&s.d(),r=!1,run_all(i)}}}function create_if_block(t){let e,n,r,i,s=(t[4]||t[5])&&create_if_block_1(t),o=ensure_array_like(t[11]()),a=[];for(let l=0;l<o.length;l+=1)a[l]=create_each_block(get_each_context(t,o,l));const c=l=>transition_out(a[l],1,1,()=>{a[l]=null});return{c(){e=svg_element("svg"),s&&s.c(),n=svg_element("g");for(let l=0;l<a.length;l+=1)a[l].c();attr(n,"transform",r=`translate(${t[2]},0)`),attr(e,"class","absolute top-0 left-0 w-full h-full")},m(l,u){insert(l,e,u),s&&s.m(e,null),append$1(e,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);i=!0},p(l,u){if(l[4]||l[5]?s?(s.p(l,u),u&48&&transition_in(s,1)):(s=create_if_block_1(l),s.c(),transition_in(s,1),s.m(e,n)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),u&7116){o=ensure_array_like(l[11]());let f;for(f=0;f<o.length;f+=1){const h=get_each_context(l,o,f);a[f]?(a[f].p(h,u),transition_in(a[f],1)):(a[f]=create_each_block(h),a[f].c(),transition_in(a[f],1),a[f].m(n,null))}for(group_outros(),f=o.length;f<a.length;f+=1)c(f);check_outros()}(!i||u&4&&r!==(r=`translate(${l[2]},0)`))&&attr(n,"transform",r)},i(l){if(!i){transition_in(s);for(let u=0;u<o.length;u+=1)transition_in(a[u]);i=!0}},o(l){transition_out(s),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)transition_out(a[u]);i=!1},d(l){l&&detach(e),s&&s.d(),destroy_each(a,l)}}}function create_if_block_1(t){let e,n,r,i;return n=new SingleAxisLayer({props:{width:t[6]-t[2],height:t[7]-t[3],domainY:t[9](),domainX:t[8](),axisXKey:t[0],axisYKey:t[1]}}),{c(){e=svg_element("g"),create_component(n.$$.fragment),attr(e,"transform",r=`translate(${t[2]},0)`)},m(s,o){insert(s,e,o),mount_component(n,e,null),i=!0},p(s,o){const a={};o&68&&(a.width=s[6]-s[2]),o&136&&(a.height=s[7]-s[3]),o&512&&(a.domainY=s[9]()),o&256&&(a.domainX=s[8]()),o&1&&(a.axisXKey=s[0]),o&2&&(a.axisYKey=s[1]),n.$set(a),(!i||o&4&&r!==(r=`translate(${s[2]},0)`))&&attr(e,"transform",r)},i(s){i||(transition_in(n.$$.fragment,s),i=!0)},o(s){transition_out(n.$$.fragment,s),i=!1},d(s){s&&detach(e),destroy_component(n)}}}function create_each_block(t){let e,n,r;var i=t[12][t[16].type];function s(o,a){return{props:{width:o[6]-o[2],height:o[7]-o[3],domainY:o[9](),domainX:o[8](),spec:o[16]}}}return i&&(e=construct_svelte_component(i,s(t))),{c(){e&&create_component(e.$$.fragment),n=empty$1()},m(o,a){e&&mount_component(e,o,a),insert(o,n,a),r=!0},p(o,a){if(a&2048&&i!==(i=o[12][o[16].type])){if(e){group_outros();const c=e;transition_out(c.$$.fragment,1,0,()=>{destroy_component(c,1)}),check_outros()}i?(e=construct_svelte_component(i,s(o)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,n.parentNode,n)):e=null}else if(i){const c={};a&68&&(c.width=o[6]-o[2]),a&136&&(c.height=o[7]-o[3]),a&512&&(c.domainY=o[9]()),a&256&&(c.domainX=o[8]()),a&2048&&(c.spec=o[16]),e.$set(c)}},i(o){r||(e&&transition_in(e.$$.fragment,o),r=!0)},o(o){e&&transition_out(e.$$.fragment,o),r=!1},d(o){o&&detach(n),e&&destroy_component(e,o)}}}function create_pending_block(t){let e;return{c(){e=element("p"),e.textContent="Loading datasets... pls wait"},m(n,r){insert(n,e,r)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function create_fragment$2(t){let e,n,r,i={ctx:t,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,blocks:[,,,]};return handle_promise(n=t[10](),i),{c(){e=empty$1(),i.block.c()},m(s,o){insert(s,e,o),i.block.m(s,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(s,[o]){t=s,i.ctx=t,o&1024&&n!==(n=t[10]())&&handle_promise(n,i)||update_await_block_branch(i,t,o)},i(s){r||(transition_in(i.block),r=!0)},o(s){for(let o=0;o<3;o+=1){const a=i.blocks[o];transition_out(a)}r=!1},d(s){s&&detach(e),i.block.d(s),i.token=null,i=null}}}function instance$1(t,e,n){let r,i,s,o,{charts:a}=e,{axisX:c}=e,{axisY:l}=e,{axisMarginLeft:u=35}=e,{axisMarginBottom:f=35}=e,{showAxisX:h=!0}=e,{showAxisY:p=!0}=e;const _={line:LineLayer,area:LineLayer,bars:LineLayer,dots:LineLayer};let m=0,v=0;const N=g=>{const{entries:b}=g.detail,A=b[0],{width:$,height:E}=A.contentRect;n(6,m=$),n(7,v=E)};return t.$$set=g=>{"charts"in g&&n(14,a=g.charts),"axisX"in g&&n(0,c=g.axisX),"axisY"in g&&n(1,l=g.axisY),"axisMarginLeft"in g&&n(2,u=g.axisMarginLeft),"axisMarginBottom"in g&&n(3,f=g.axisMarginBottom),"showAxisX"in g&&n(4,h=g.showAxisX),"showAxisY"in g&&n(5,p=g.showAxisY)},t.$$.update=()=>{t.$$.dirty&16387&&n(11,r=()=>a.flatMap(({serverURL:g,selection:b,type:A,style:$})=>{const E={};Object.keys($).filter(M=>M.startsWith("ensemble:")).forEach(M=>{const S=M.split("ensemble:")[1];S in E||(E[S]={}),E[S]={...$[M],...E[S]}});const C=getLoadedDataForSelection(g,b),{selector:R}=b;return C.map(({datasetURL:M,ensembleAlias:S})=>{let w={};return S in E&&(w={...E[S],...w}),{type:A,axisX:c,axisY:l,selector:R,datasetURL:M,style:w}})})),t.$$.dirty&16384&&n(10,i=async()=>{await Promise.all(a.map(({serverURL:g,selection:b})=>ensureDataSelectionIsLoaded(g,b)))}),t.$$.dirty&16386&&n(9,s=()=>{const g=a.map(({serverURL:b,selection:A})=>getLoadedDataForSelection(b,A).domain(l,A.selector));return[Math.min(...g.map(b=>b[0])),Math.max(...g.map(b=>b[1]))]}),t.$$.dirty&16385&&n(8,o=()=>{const g=a.map(({serverURL:b,selection:A})=>getLoadedDataForSelection(b,A).domain(c,A.selector));return[Math.min(...g.map(b=>b[0])),Math.max(...g.map(b=>b[1]))]})},[c,l,u,f,h,p,m,v,o,s,i,r,_,N,a]}class SinglePlotView extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$1,create_fragment$2,safe_not_equal,{charts:14,axisX:0,axisY:1,axisMarginLeft:2,axisMarginBottom:3,showAxisX:4,showAxisY:5})}}function create_fragment$1(t){let e,n,r,i,s,o,a,c,l,u,f,h,p,_,m,v,N,g,b,A,$,E,C,R,M,S,w,T;return o=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),l=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),h=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),m=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),g=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),$=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),R=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),w=new SinglePlotView({props:{charts:t[0],axisX:"time",axisY:"values"}}),{c(){e=element("div"),n=element("div"),r=element("div"),r.innerHTML="(done) here&#39;s a chart view of summary rows<br/> one line chart per name",i=space(),s=element("div"),create_component(o.$$.fragment),a=space(),c=element("div"),create_component(l.$$.fragment),u=space(),f=element("div"),create_component(h.$$.fragment),p=space(),_=element("div"),create_component(m.$$.fragment),v=space(),N=element("div"),create_component(g.$$.fragment),b=space(),A=element("div"),create_component($.$$.fragment),E=space(),C=element("div"),create_component(R.$$.fragment),M=space(),S=element("div"),create_component(w.$$.fragment),attr(s,"class","w-96 h-96"),attr(c,"class","w-96 h-96"),attr(f,"class","w-96 h-96"),attr(_,"class","w-96 h-96"),attr(N,"class","w-96 h-96"),attr(A,"class","w-96 h-96"),attr(C,"class","w-96 h-96"),attr(S,"class","w-96 h-96"),attr(n,"class","m-2"),attr(e,"class","flex-wrap flex")},m(k,F){insert(k,e,F),append$1(e,n),append$1(n,r),append$1(n,i),append$1(n,s),mount_component(o,s,null),append$1(n,a),append$1(n,c),mount_component(l,c,null),append$1(n,u),append$1(n,f),mount_component(h,f,null),append$1(n,p),append$1(n,_),mount_component(m,_,null),append$1(n,v),append$1(n,N),mount_component(g,N,null),append$1(n,b),append$1(n,A),mount_component($,A,null),append$1(n,E),append$1(n,C),mount_component(R,C,null),append$1(n,M),append$1(n,S),mount_component(w,S,null),T=!0},p:noop$1,i(k){T||(transition_in(o.$$.fragment,k),transition_in(l.$$.fragment,k),transition_in(h.$$.fragment,k),transition_in(m.$$.fragment,k),transition_in(g.$$.fragment,k),transition_in($.$$.fragment,k),transition_in(R.$$.fragment,k),transition_in(w.$$.fragment,k),T=!0)},o(k){transition_out(o.$$.fragment,k),transition_out(l.$$.fragment,k),transition_out(h.$$.fragment,k),transition_out(m.$$.fragment,k),transition_out(g.$$.fragment,k),transition_out($.$$.fragment,k),transition_out(R.$$.fragment,k),transition_out(w.$$.fragment,k),T=!1},d(k){k&&detach(e),destroy_component(o),destroy_component(l),destroy_component(h),destroy_component(m),destroy_component(g),destroy_component($),destroy_component(R),destroy_component(w)}}}function instance(t){const e=new URLSearchParams(window.location.search);return[[{serverURL:decodeURIComponent(e.get("serverURL")||"http://localhost:8001/ensembles"),type:"line",selection:{ensembles:["first","last"],realizations:"*",netcdfFile:"summary.nc",selector:"name===FOPR"},style:{"ensemble:first":{stroke:"#2E282A",opacity:.35,"stroke-width":"2px"},"ensemble:last":{stroke:"#CD5334",opacity:.35,"stroke-width":"2px"}}}]]}class Plots extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment$1,safe_not_equal,{})}}function create_fragment(t){let e,n,r;return n=new Plots({}),{c(){e=element("main"),create_component(n.$$.fragment),attr(e,"class","flex flex-wrap")},m(i,s){insert(i,e,s),mount_component(n,e,null),r=!0},p:noop$1,i(i){r||(transition_in(n.$$.fragment,i),r=!0)},o(i){transition_out(n.$$.fragment,i),r=!1},d(i){i&&detach(e),destroy_component(n)}}}class App extends SvelteComponent{constructor(e){super(),init$1(this,e,null,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});
